<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"> 
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DataBrain-Meek</title>
	<link rel="shortcut icon" href="static/favicon.ico"/>
    <link rel="bookmark" href="static/favicon.ico"/>
	<link rel="stylesheet" href="static/css/bootstrap.min.css">  
	<script src="static/js/jquery.min.js"></script>
	<script src="static/js/bootstrap.min.js"></script>
	<!-- 引入 dataTables.js -->
	<script src="static/js/jquery.dataTables.min.js"></script>
	<script src="static/js/dataTables.bootstrap.min.js"></script>
	<link rel="stylesheet" href="static/css/dataTables.bootstrap.min.css">  
    <!-- 引入 echarts.js -->
    <script src="static/js/echarts.min.js"></script>
    <script src='static/js/dark.js'></script>	
	<style>
	h3,h4,h5,p {
    color: #fff;
    }
	body{
	    background-image:url("static/img/index_bg.png");
	}
	/* navbar */
	.navbar-inverse {
		background-color: #3D3D3D;
	}

    .fakeimg {
        height: 250px;
    }
	.table-hover > tbody > tr:hover {
		background-color: #ff7f50;
		color:#ffffff;
	}

	.center-top {
    position: relative;
    top: 0;
    left: 0;
    background: url(static/img/title_border.png) bottom center no-repeat;
    display: flex;
    justify-content: center;
    align-items: center;
    }

	.center-top>h1 {
		color: #cdddf7;
		letter-spacing: 5px;
	}

	.divcss5{
	background:#ffffff; 
	color:#000000;
	padding:20px 10px 20px 10px;
	} 
    </style>
</head>
<body>
	<div class="center-top">
		<h1>DataBrain</h1>
	</div>

	<div class="container">
		<div class="row">
			<div class="col-sm-4">
				<h3 class="btn-danger">DataBrain-业绩走势</h3>
				<div class="fakeimg"> <div id="fundDB" style="height: 100%"></div></div>			 
				<h3 class="btn-primary">DataBrain-实盘收益</h3>
				<div id="dealDB" class="fakeimg"><!-- 为ECharts准备一个具备大小（宽高）的Dom color:rgba(233,150,122,0.9); --></div>
				<p></p>
				<p></p>
			</div>			 
			<div class="col-sm-8">
				<h3 class="btn-info">DataBrain-交易记录</h3>
				<div class="divcss5">
					<table id="example" class="table table-hover table-striped table-bordered" style="width:100%">
						<thead>
							<tr>
								<th>日期</th>
								<th>股票</th>
								<th>代码</th>
								<th>交易策略</th>
								<th>总仓位</th>
							</tr>
						</thead>
						<tbody>
						  <meta charset="UTF-8">
						  {% for stock in stocks %}
							<tr style="cursor:pointer" onclick="window.open('{{ url_for('detailview',code_id=stock.code) }}');" >
								<td>{{ stock.date}}</td>
								<td>{{ stock.name}}</td>
								<td>{{ stock.code}}</td>
								<td>{{ stock.bs}}</td>
								<td>{{ stock.dayhold}}</td>
							</tr>
						  {% endfor %}
						</tbody>
					</table>
				</div>
			 </div>

		<hr class="hidden-sm hidden-md hidden-lg">
		</div>		
	</div>

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded js-scroll-trigger" href="#page-top">
      <i class="fas fa-angle-up"></i>
    </a>
	<div class="jumbotron text-center" style="margin-bottom:0">
	  <p>底部内容</p>
	</div>
<script type="text/javascript">

	var fundChart = echarts.init(document.getElementById("fundDB"));
    var dealChart = echarts.init(document.getElementById("dealDB"));
		// 发送ajax请求，从后台获取json数据
    $(document).ready(function () {
	   $('#example').DataTable({
	   "searching": true,
	   "cardView" : false, //是否显示详细视图
       "detailView" : false, //是否显示父子表
	   "bJQueryUI" : true,
	   "bInfo" : true, //是否显示页脚信息，DataTables插件左下角显示记录数  
	  // "aaSorting" : [[1, "asc"]], //默认的排序方式，第2列，升序排列  
	   "oLanguage": { //国际化配置 
                "sProcessing" : "正在获取数据，请稍后...",   
                "sLengthMenu" : "显示 _MENU_ 条",   
                "sZeroRecords" : "没有您要搜索的内容",   
                "sInfo" : "从 _START_ 到  _END_ 条记录 总记录数为 _TOTAL_ 条",   
                "sInfoEmpty" : "记录数为0",   
                "sInfoFiltered" : "(全部记录数 _MAX_ 条)",   
                "sInfoPostFix" : "",   
                "sSearch" : "搜索",   
                "sUrl" : "",   
                "oPaginate": {   
                    "sFirst" : "第一页",   
                    "sPrevious" : "上一页",   
                    "sNext" : "下一页",   
                    "sLast" : "最后一页"   
                } 
            },
	   onClickRow:function (row,$element) {
                    window.location = "www.taodata.com";
                },
	   });
     // getData2();
    //  getData();

    });



	var fdate={{fundline.date}}
	var fdb={{fundline.db}}
	var fhs={{fundline.hs300}}
	 fundChart.setOption({
	 backgroundColor:'rgba(255, 255, 255, 1)',
		 legend: {
				data:['DB','HS300']
			},
		xAxis: {
			type: 'category',
			data: fdate
		},
		yAxis: {
			type: 'value'
		},
		series: [
		{
			 name:'HS300',
				type:'line',
				smooth:false,
				symbol: 'none',
				sampling: 'average',
				itemStyle: {
					color: 'rgb(0, 70, 131)'
				},
				areaStyle: {
					color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
						offset: 0,
						color: 'rgb(0, 158, 68)'
					}, {
						offset: 1,
						color: 'rgb(0, 70, 131)'
					}])
				},
			data: fhs
		},
		{
			 name:'DB',
				type:'line',
				smooth:false,
				symbol: 'none',
				sampling: 'average',
				itemStyle: {
					color: 'rgb(255, 70, 131)'
				},
				areaStyle: {
					color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
						offset: 0,
						color: 'rgb(255, 158, 68)'
					}, {
						offset: 1,
						color: 'rgb(255, 70, 131)'
					}])
				},
			data: fdb
		}]
	})


	var fdb1={{fundbar.db}}
	var fhs1={{fundbar.hs300}}
	option = null;
	option = {
	    backgroundColor:'rgba(255, 255, 255, 1)',
		title: {
			text: '',
			subtext: ''
		},
		tooltip: {
			trigger: 'axis',
			axisPointer: {
				type: 'shadow'
			}
		},
		legend: {
			data: ['DB', 'HS300']
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		xAxis: {
			type: 'category',
			data: ['第1周','第2周','第3周','第4周','第5周','第6周','第7周','第8周','第9周']
		},
		yAxis: {
			type: 'value',
			boundaryGap: [0, 0.01]
		},
		series: [
			{
				name: 'DB',
				type: 'bar',
				data: fdb1
			},
			{
				name: 'HS300',
				type: 'bar',
				data: fhs1,
				itemStyle:{
                normal:{
                    color:function(params){
                        if(params.value >0){
                            return "#FE8463";
                        }else{
                            return "#FE8463";
                        }
                        return "#9BCA63";
                    }
                }
            }
			}
		]
	};

	if (option && typeof option === "object") {
		dealChart.setOption(option, true);
	}
</script>
</body>
</html>